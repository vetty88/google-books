(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{56:function(e,t,s){},68:function(e,t,s){},70:function(e,t,s){},90:function(e,t,s){},92:function(e,t,s){},93:function(e,t,s){},94:function(e,t,s){"use strict";s.r(t);var a=s(3),n=s.n(a),c=s(28),i=s.n(c),o=s(104),l=(s(56),s(13)),r=s(105),h=s(50),d=s(103),b=(s(68),s(1));const j=({children:e})=>Object(b.jsx)("ul",{className:"list-group",children:e});function m({children:e}){return Object(b.jsx)("li",{className:"list-group-item",children:e})}var u=({title:e,subtitle:t,authors:s,link:a,description:n,image:c,Button:i})=>{const o=(r=255,h="...",(l=n)?(null==r&&(r=100),null==h&&(h="..."),l.length>r?l.substring(0,r-h.length)+h:l):l);var l,r,h;return Object(b.jsx)(m,{children:Object(b.jsx)("div",{className:"media-snippet",children:Object(b.jsxs)("article",{className:"media",children:[Object(b.jsx)("figure",{className:"media-left",children:Object(b.jsx)("p",{children:Object(b.jsx)("img",{className:"image is-128xauto",src:c,alt:e})})}),Object(b.jsxs)("div",{className:"media-content",children:[Object(b.jsx)("h3",{className:"heading-title",children:e}),t&&Object(b.jsx)("h5",{className:"heading-subtitle",children:t}),Object(b.jsxs)("p",{className:"heading-subtitle",children:["by ",s," (Author)"]}),Object(b.jsx)("p",{className:"p-article",children:o}),Object(b.jsxs)("div",{className:"d-flex flex-row bd-highlight mb-3",children:[Object(b.jsx)("div",{className:"p-2 bd-highlight",children:Object(b.jsx)("a",{href:a,className:"btn view-button heading-subtitle ml-2",target:"_blank",rel:"noopener noreferrer",children:"View"})}),Object(b.jsx)("div",{className:"p-2 bd-highlight",children:Object(b.jsx)(i,{})})]})]})]})})})};s(70);var x=function({q:e,handleInputChange:t,handleFormSubmit:s}){return Object(b.jsxs)("form",{className:"form-inline",role:"form",children:[Object(b.jsxs)("div",{className:"form-group mx-sm-3 mb-2",children:[Object(b.jsx)("label",{htmlFor:"Title",className:"sr-only",children:"Search Book Title"}),Object(b.jsx)("input",{className:"form-control heading-subtitle ",id:"Title",type:"text",value:e,placeholder:"Book Title...",name:"q",onChange:t,size:"55",required:!0})]}),Object(b.jsx)("button",{onClick:s,type:"submit",className:"btn btn-lg search-button heading-subtitle",children:"Search"})]})},g=s(16),v=s.n(g),p=s(102),O=s(8);var N={init:function(){p.a({dsn:"https://a41aa1fe4a4b4fe7b8634c7b0829265a@o523836.ingest.sentry.io/5636132"})},log:function(e){O.a(e),console.log(e)}};v.a.interceptors.response.use(null,(e=>(e.response&&e.response.status>=400&&e.response.status<500||(N.log(e),l.toast.error("An unexpected error occured.")),Promise.reject(e))));var f={get:v.a.get,post:v.a.post,put:v.a.put,delete:v.a.delete},k=function(e){return f.get("/api/google",{params:{q:"title:"+e}})},S=function(){return f.get("/api//books")},B=function(e){return f.delete("/api/books/"+e)},w=function(e){return f.post("/api/books",e)};class I extends a.Component{constructor(...e){super(...e),this.state={books:[],q:"",message:"Simply search for books via the Google Books API"},this.handleInputChange=e=>{const t=e.target,s=t.name,a=t.value;this.setState({[s]:a})},this.getBooks=()=>{k(this.state.q).then((e=>this.setState({books:e.data,currentPage:1}))).catch((()=>{l.toast.error("Your search did not match any book results."),this.setState({books:[],message:"Your search did not match any book results.",currentPage:1})}))},this.handleFormSubmit=e=>{e.preventDefault(),this.getBooks()},this.handleBookSave=e=>{const t=this.state.books.find((t=>t.id===e));w({googleId:t.id,title:t.volumeInfo.title,subtitle:t.volumeInfo.subtitle,link:t.volumeInfo.infoLink,authors:t.volumeInfo.authors,description:t.volumeInfo.description,image:t.volumeInfo.imageLinks.thumbnail}).then((()=>this.getBooks()))}}render(){return Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col-10 col-centered",children:Object(b.jsxs)("div",{className:"d-flex flex-wrap flex-row bd-highlight mb-3 justify-content-center align-items-center",children:[Object(b.jsx)("div",{className:"order-sm-2 p-2 bd-highlight"}),Object(b.jsxs)("div",{className:"order-sm-1 p-2 bd-highlight",children:[Object(b.jsx)("h1",{className:"heading-title mx-sm-3 mb-2",children:"React Google Books Search"}),Object(b.jsx)("h2",{className:"heading-subtitle mx-sm-3 mb-2",children:"Search for and Save Books of Interest."}),Object(b.jsx)(x,{handleInputChange:this.handleInputChange,handleFormSubmit:this.handleFormSubmit,q:this.state.q})]})]})})}),Object(b.jsx)("div",{className:"row",children:Object(b.jsxs)("div",{className:"col-10 col-centered card-content mb-4",children:[Object(b.jsx)("h1",{className:"heading-title mx-sm-3 mb-2 text-center",children:"Results"}),this.state.books.length?Object(b.jsx)(j,{children:this.state.books.map((e=>Object(b.jsx)(u,{title:e.volumeInfo.title,subtitle:e.volumeInfo.subtitle,link:e.volumeInfo.infoLink,authors:e.volumeInfo.authors.join(", "),description:e.volumeInfo.description,image:e.volumeInfo.imageLinks.thumbnail,Button:()=>Object(b.jsx)("button",{onClick:()=>this.handleBookSave(e.id),className:"btn save-button  heading-subtitle ml-2",children:"Save"})},e.id)))}):Object(b.jsx)("div",{className:"mockup-content",children:Object(b.jsx)("h2",{className:"heading-title text-center",children:this.state.message})})]})})]})}}var y=I,C=s(30),q=s.n(C),F=s(49);class T extends a.Component{constructor(...e){var t;super(...e),t=this,this.state={books:[]},this.getSavedBooks=()=>{S().then((e=>this.setState({books:e.data}))).catch((e=>console.log(e)))},this.handleBookDelete=function(){var e=Object(F.a)(q.a.mark((function e(s){var a;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.state.books,e.prev=1,e.next=4,B(s).then((e=>t.getSavedBooks()));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),e.t0.response&&404===e.t0.response.status&&l.toast.error("This book has been deleted."),t.setState({books:a});case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()}componentDidMount(){this.getSavedBooks()}render(){const e=this.state.books.length;return Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col-8 col-centered",children:Object(b.jsxs)("div",{className:"d-flex flex-row bd-highlight mb-3 justify-content-center align-items-center",children:[Object(b.jsx)("div",{className:"p-2 bd-highlight"}),Object(b.jsxs)("div",{className:"p-2 bd-highlight",children:[Object(b.jsx)("h1",{className:"heading-title mx-sm-3 mb-2",children:"React Google Books Search"}),Object(b.jsxs)("h2",{className:"heading-subtitle mx-sm-3 mb-2 text-center",children:["Showing ",e," books in the database."]})]})]})})}),Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col-8 col-centered card-content",children:this.state.books.length?Object(b.jsx)(j,{children:this.state.books.map((e=>Object(b.jsx)(u,{title:e.title,subtitle:e.subtitle,link:e.link,authors:e.authors.join(", "),description:e.description,image:e.image,Button:()=>Object(b.jsx)("button",{onClick:()=>this.handleBookDelete(e._id),className:"btn delete-button heading-subtitle ml-2",children:"Delete"})},e._id)))}):Object(b.jsx)("div",{className:"mockup-content",children:Object(b.jsx)("h2",{className:"brand-title text-center",children:"No saved books in the database"})})})})]})}}var D=T;var G=()=>Object(b.jsx)("h1",{className:"heading-title text-center",children:"404 Page Not Found"}),P=s(31),L=s(101);s(90);var A=()=>Object(b.jsx)(n.a.Fragment,{children:Object(b.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light",children:[Object(b.jsx)(P.a,{className:"navbar-brand brand-title",to:"#",children:"Google Books Search"}),Object(b.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(b.jsx)("span",{className:"navbar-toggler-icon"})}),Object(b.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:Object(b.jsxs)("ul",{className:"navbar-nav",children:[Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(L.a,{className:"nav-link heading-title",to:"/search",children:"Search"})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(L.a,{className:"nav-link heading-title",to:"/saved",children:"Saved"})})]})})]})});s(92);var R=()=>Object(b.jsx)("footer",{className:"page-footer",children:Object(b.jsx)("div",{className:"container-fluid text-center",children:Object(b.jsx)("p",{children:"Google Books - Y Waller"})})});s(93);class W extends a.Component{render(){return Object(b.jsxs)(n.a.Fragment,{children:[Object(b.jsx)(l.ToastContainer,{}),Object(b.jsxs)("section",{className:"hero-is-fullheight",children:[Object(b.jsx)("div",{className:"head-head",children:Object(b.jsx)(A,{})}),Object(b.jsx)("div",{className:"head-body",children:Object(b.jsxs)(r.a,{children:[Object(b.jsx)(h.a,{path:"/search",component:y}),Object(b.jsx)(h.a,{path:"/saved",component:D}),Object(b.jsx)(h.a,{path:"/not-found",component:G}),Object(b.jsx)(d.a,{from:"/",exact:!0,to:"/search"}),Object(b.jsx)(d.a,{to:"/not-found"})]})}),Object(b.jsx)("div",{className:"head-foot",children:Object(b.jsx)(R,{})})]})]})}}var Y=W;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(b.jsx)(o.a,{children:Object(b.jsx)(Y,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{e.unregister()}))}},[[94,1,2]]]);
//# sourceMappingURL=main.966b5614.chunk.js.map