{"ast":null,"code":"import _objectSpread from\"C:\\\\MONASH BOOTCAMP\\\\YW_Google-Books\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\MONASH BOOTCAMP\\\\YW_Google-Books\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\MONASH BOOTCAMP\\\\YW_Google-Books\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\MONASH BOOTCAMP\\\\YW_Google-Books\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\MONASH BOOTCAMP\\\\YW_Google-Books\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import API from\"../utils/API\";import Jumbotron from\"../components/Jumbotron\";import{Container,Row,Col}from\"../components/Grid\";import Form from\"../components/Form\";import Search from\"../components/Search\";import Nav from\"../components/Nav\";// import Footer from \"../components/Footer\"\nvar SearchBooks=/*#__PURE__*/function(_Component){_inherits(SearchBooks,_Component);var _super=_createSuper(SearchBooks);function SearchBooks(){var _this;_classCallCheck(this,SearchBooks);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={search:\"Pride & Prejudice\",books:[],error:\"\",message:\"\"};_this.handleInputChange=function(event){_this.setState({search:event.target.value});};_this.handleFormSubmit=function(event){event.preventDefault();// once it clicks it connects to the google book api with the search value\nAPI.getGoogleSearchBooks(_this.state.search).then(function(res){if(res.data.items===\"error\"){throw new Error(res.data.items);}else{// store response in a array\nvar results=res.data.items;//map through array\nresults=results.map(function(result){//store each book in a new object\nresult={key:result.id,id:result.id,title:result.volumeInfo.title,author:result.volumeInfo.authors,description:result.volumeInfo.description,image:result.volumeInfo.imageLinks.thumbnail,link:result.volumeInfo.infoLink,buttonText:\"Save Book\"};return result;});// reset state\n_this.setState({books:results,error:\"\"});}}).catch(function(err){return _this.setState({error:err.items});});};_this.handleSavedButton=function(event){// console.log(event)\nevent.preventDefault();console.log(_this.state.books);console.log(event.target.id);var savedBooks=_this.state.books.filter(function(book){return book.id===event.target.id;});savedBooks=savedBooks[0];console.log(savedBooks);API.saveBook(savedBooks).then(_this.setState({books:_this.state.books.map(function(book){if(book.id===event.target.id){return _objectSpread(_objectSpread({},book),{},{buttonText:\"Saved!\"});}else{return book;}})})).catch(function(err){return console.log(\"ERROR\",err);});};return _this;}_createClass(SearchBooks,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Nav,null),/*#__PURE__*/React.createElement(Jumbotron,null),/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{size:\"12\"},/*#__PURE__*/React.createElement(Form,{handleFormSubmit:this.handleFormSubmit,handleInputChange:this.handleInputChange})))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Search,{books:this.state.books,handleSavedButton:this.handleSavedButton})));}}]);return SearchBooks;}(Component);export default SearchBooks;","map":{"version":3,"sources":["C:/MONASH BOOTCAMP/YW_Google-Books/client/src/pages/Search.js"],"names":["React","Component","API","Jumbotron","Container","Row","Col","Form","Search","Nav","SearchBooks","state","search","books","error","message","handleInputChange","event","setState","target","value","handleFormSubmit","preventDefault","getGoogleSearchBooks","then","res","data","items","Error","results","map","result","key","id","title","volumeInfo","author","authors","description","image","imageLinks","thumbnail","link","infoLink","buttonText","catch","err","handleSavedButton","console","log","savedBooks","filter","book","saveBook"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport API from \"../utils/API\";\r\nimport Jumbotron from \"../components/Jumbotron\";\r\nimport { Container, Row, Col } from \"../components/Grid\";\r\nimport Form from \"../components/Form\";\r\nimport Search from \"../components/Search\";\r\nimport Nav from \"../components/Nav\";\r\n// import Footer from \"../components/Footer\"\r\n\r\nclass SearchBooks extends Component {\r\n  //initial state\r\n  state = {\r\n    search: \"Pride & Prejudice\",\r\n    books: [],\r\n    error: \"\",\r\n    message: \"\",\r\n  };\r\n\r\n  //function for search bar\r\n  handleInputChange = (event) => {\r\n    this.setState({ search: event.target.value });\r\n  };\r\n\r\n  //function for submit button on search form\r\n  handleFormSubmit = (event) => {\r\n    event.preventDefault();\r\n    // once it clicks it connects to the google book api with the search value\r\n    API.getGoogleSearchBooks(this.state.search)\r\n      .then((res) => {\r\n        if (res.data.items === \"error\") {\r\n          throw new Error(res.data.items);\r\n        } else {\r\n          // store response in a array\r\n          let results = res.data.items;\r\n          //map through array\r\n          results = results.map((result) => {\r\n            //store each book in a new object\r\n            result = {\r\n              key: result.id,\r\n              id: result.id,\r\n              title: result.volumeInfo.title,\r\n              author: result.volumeInfo.authors,\r\n              description: result.volumeInfo.description,\r\n              image: result.volumeInfo.imageLinks.thumbnail,\r\n              link: result.volumeInfo.infoLink,\r\n              buttonText: \"Save Book\"\r\n            };\r\n            return result;\r\n          });\r\n          // reset state\r\n          this.setState({ books: results, error: \"\" });\r\n        }\r\n      })\r\n      .catch((err) => this.setState({ error: err.items }));\r\n  };\r\n\r\n  handleSavedButton = (event) => {\r\n    // console.log(event)\r\n    event.preventDefault();\r\n    console.log(this.state.books);\r\n    console.log(event.target.id);\r\n    let savedBooks = this.state.books.filter(\r\n      (book) => book.id === event.target.id\r\n    );\r\n    savedBooks = savedBooks[0];\r\n    console.log(savedBooks);\r\n    API.saveBook(savedBooks)\r\n      .then(this.setState({ books: this.state.books.map(book=>{\r\n        if (book.id === event.target.id){\r\n          return {\r\n            ...book, buttonText: \"Saved!\"\r\n          }\r\n        } else {\r\n          return book;\r\n        }\r\n      })\r\n     }))\r\n      .catch((err) => console.log(\"ERROR\", err));\r\n  };\r\n  render() {\r\n    return (\r\n      <>\r\n      <Nav/>\r\n        <Jumbotron/>\r\n        <Container>\r\n          <Row>\r\n            <Col size=\"12\">\r\n              <Form\r\n                handleFormSubmit={this.handleFormSubmit}\r\n                handleInputChange={this.handleInputChange}\r\n              />\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n        <br></br>\r\n        <Container>\r\n          <Search\r\n            books={this.state.books}\r\n            handleSavedButton={this.handleSavedButton}\r\n          />\r\n        </Container>\r\n        {/* <Footer/> */}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SearchBooks;"]},"metadata":{},"sourceType":"module"}