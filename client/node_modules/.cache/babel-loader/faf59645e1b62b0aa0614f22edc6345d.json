{"ast":null,"code":"import _classCallCheck from\"C:\\\\MONASH BOOTCAMP\\\\YW_Google-Books\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\MONASH BOOTCAMP\\\\YW_Google-Books\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\MONASH BOOTCAMP\\\\YW_Google-Books\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\MONASH BOOTCAMP\\\\YW_Google-Books\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import API from\"../utils/API\";import Jumbotron from\"../components/Jumbotron\";import{Container,Row,Col}from\"../components/Grid\";import SearchForm from\"../components/SearchForm\";import SearchResult from\"../components/SearchResult\";var SearchBooks=/*#__PURE__*/function(_Component){_inherits(SearchBooks,_Component);var _super=_createSuper(SearchBooks);function SearchBooks(){var _this;_classCallCheck(this,SearchBooks);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={search:\"\",books:[],error:\"\",message:\"\"};_this.handleInputChange=function(event){_this.setState({search:event.target.value});};_this.handleFormSubmit=function(event){event.preventDefault();// once it clicks it connects to the google book api with the search value\nAPI.getGoogleSearchBooks(_this.state.search).then(function(res){if(res.data.items===\"error\"){throw new Error(res.data.items);}else{// store response in a array\nvar results=res.data.items;//map through the array \nresults=results.map(function(result){//store each book information in a new object \nresult={key:result._id,_id:result._id,title:result.volumeInfo.title,author:result.volumeInfo.authors,description:result.volumeInfo.description,image:result.volumeInfo.imageLinks.thumbnail,link:result.volumeInfo.infoLink};return result;});// reset the sate of the empty books array to the new arrays of objects with properties geting back from the response\n_this.setState({books:results,error:\"\"});}}).catch(function(err){return _this.setState({error:err.items});});};_this.handleSavedButton=function(event){// console.log(event)\nevent.preventDefault();console.log(_this.state.books);var savedBooks=_this.state.books.filter(function(book){return book._id===event.target._id;});savedBooks=savedBooks[0];API.saveBook(savedBooks).then(_this.setState({message:alert(\"Your book is saved\")})).catch(function(err){return console.log(err);});};return _this;}_createClass(SearchBooks,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(Container,{fluid:true},/*#__PURE__*/React.createElement(Jumbotron,null,/*#__PURE__*/React.createElement(\"h1\",{className:\"text-white\"},\"Find Your Favorite Books with GoogleBook API\")),/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{size:\"12\"},/*#__PURE__*/React.createElement(SearchForm,{handleFormSubmit:this.handleFormSubmit,handleInputChange:this.handleInputChange})))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(SearchResult,{books:this.state.books,handleSavedButton:this.handleSavedButton})));}}]);return SearchBooks;}(Component);export default SearchBooks;","map":{"version":3,"sources":["C:/MONASH BOOTCAMP/YW_Google-Books/client/src/pages/SearchBooks.js"],"names":["React","Component","API","Jumbotron","Container","Row","Col","SearchForm","SearchResult","SearchBooks","state","search","books","error","message","handleInputChange","event","setState","target","value","handleFormSubmit","preventDefault","getGoogleSearchBooks","then","res","data","items","Error","results","map","result","key","_id","title","volumeInfo","author","authors","description","image","imageLinks","thumbnail","link","infoLink","catch","err","handleSavedButton","console","log","savedBooks","filter","book","saveBook","alert"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport API from \"../utils/API\";\r\nimport Jumbotron from \"../components/Jumbotron\";\r\nimport { Container, Row, Col } from \"../components/Grid\";\r\nimport SearchForm from \"../components/SearchForm\";\r\nimport SearchResult from \"../components/SearchResult\"\r\n\r\n\r\nclass SearchBooks extends Component {\r\n    //create state\r\n    state = {\r\n        search: \"\",\r\n        books: [],\r\n        error: \"\",\r\n        message: \"\"\r\n    };\r\n\r\n    //function to take value of what enter in the search bar\r\n    handleInputChange = event => {\r\n        this.setState({ search: event.target.value })\r\n    }\r\n\r\n    //function to control the submit button of the search form \r\n    handleFormSubmit = event => {\r\n        event.preventDefault();\r\n        // once it clicks it connects to the google book api with the search value\r\n        API.getGoogleSearchBooks(this.state.search)\r\n            .then(res => {\r\n                if (res.data.items === \"error\") {\r\n                    throw new Error(res.data.items);\r\n                }\r\n                else {\r\n                    // store response in a array\r\n                    let results = res.data.items\r\n                    //map through the array \r\n                    results = results.map(result => {\r\n                        //store each book information in a new object \r\n                        result = {\r\n                            key: result._id,\r\n                            _id: result._id,\r\n                            title: result.volumeInfo.title,\r\n                            author: result.volumeInfo.authors,\r\n                            description: result.volumeInfo.description,\r\n                            image: result.volumeInfo.imageLinks.thumbnail,\r\n                            link: result.volumeInfo.infoLink\r\n                        }\r\n                        return result;\r\n                    })\r\n                    // reset the sate of the empty books array to the new arrays of objects with properties geting back from the response\r\n                    this.setState({ books: results, error: \"\" })\r\n                }\r\n            })\r\n            .catch(err => this.setState({ error: err.items }));\r\n    }\r\n\r\n    handleSavedButton = event => {\r\n        // console.log(event)\r\n        event.preventDefault();\r\n        console.log(this.state.books)\r\n        let savedBooks = this.state.books.filter(book => book._id === event.target._id)\r\n        savedBooks = savedBooks[0];\r\n        API.saveBook(savedBooks)\r\n            .then(this.setState({ message: alert(\"Your book is saved\") }))\r\n            .catch(err => console.log(err))\r\n    }\r\n    render() {\r\n        return (\r\n            <Container fluid>\r\n                <Jumbotron>\r\n                    <h1 className=\"text-white\">Find Your Favorite Books with GoogleBook API</h1>\r\n                </Jumbotron>\r\n                <Container>\r\n                    <Row>\r\n                        <Col size=\"12\">\r\n                            <SearchForm\r\n                                handleFormSubmit={this.handleFormSubmit}\r\n                                handleInputChange={this.handleInputChange}\r\n                            />\r\n                        </Col>\r\n                    </Row>\r\n                </Container>\r\n                <br></br>\r\n                <Container>\r\n                    <SearchResult books={this.state.books} handleSavedButton={this.handleSavedButton} />\r\n                </Container>\r\n            </Container>\r\n        )\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default SearchBooks"]},"metadata":{},"sourceType":"module"}